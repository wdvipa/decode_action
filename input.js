"use strict";(self.webpackChunkcombination_template=self.webpackChunkcombination_template||[]).push([[332,5429],{75405:function(e,t,i){i.d(t,{c:function(){return v},i:function(){return m}});var o=i(50697),r=i.n(o),n=i(26100),s=i.n(n),a=i(96319),l=i.n(a),c=i(78928),d=i.n(c),f=i(36751),u=i.n(f),p=i(3300),I=i(26123),g=i(87124);function y(e,t){var i=r()(e);if(s()){var o=s()(e);t&&(o=l()(o).call(o,(function(t){return d()(e,t).enumerable}))),i.push.apply(i,o)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){(0,p.A)(e,t,i[t])})):u()?Object.defineProperties(e,u()(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,d()(i,t))}))}return e}function m(e){var t=e.eventKey,i=e.floorId,o=e.url,r=e.conditionId,n=g.Ru[t];(0,I.e9)(h(h({},n),{},{floorId:i,rese2:o,conditionId:r}))}function v(e){var t=e.eventKey,i=e.floorId,o=e.conditionId,r=g.Ru[t];(0,I.e9)(h(h({},r),{},{floorId:i,conditionId:o}))}},75429:function(e,t,i){var o=i(57083);t.A={getReport:function(e,t){var i={data:{type:t,prizeId:e}};o.A.shanxiReport(i).then((function(e){}))}}},30332:function(e,t,i){i.r(t),i.d(t,{default:function(){return q}});var o=i(50697),r=i.n(o),n=i(26100),s=i.n(n),a=i(78928),l=i.n(a),c=i(36751),d=i.n(c),f=i(34963),u=i(3300),p=i(44828),I=i.n(p),g=i(56255),y=i.n(g),h=i(11393),m=i.n(h),v=i(8628),b=i.n(v),T=i(96319),L=i.n(T),P=i(85569),k=i.n(P),z=i(18979),w=i.n(z),x=i(71426),F=i.n(x),C=i(48079),A=i.n(C),D=i(82726),_=i.n(D),S=i(57083),G=i(48590),U=i(95353),N=i(93547),O=i(44806),E=i(75429),V=i(63455),M=i(87673),R=i(95629),J=i(75405);i(64346);function $(e,t){var i=r()(e);if(s()){var o=s()(e);t&&(o=L()(o).call(o,(function(t){return l()(e,t).enumerable}))),i.push.apply(i,o)}return i}function H(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$(Object(i),!0).forEach((function(t){(0,u.A)(e,t,i[t])})):d()?Object.defineProperties(e,d()(i)):$(Object(i)).forEach((function(t){Object.defineProperty(e,t,l()(i,t))}))}return e}var B={name:"process",components:{diaLog:function(){return Promise.all([i.e(7515),i.e(5782),i.e(536)]).then(i.bind(i,25782))}},props:["floorInfo","activityInfo","nextIndex"],mixins:[O.A,V.A],data:function(){return{isNeedRefresh:"process",timeInfoList:[],floorList:[],prizeInfo:{},dialogInfo:{},doneGift:"",diaLogShowIndex:"",apiType:"",description:"",isLoading:!1,canLoad:!0,isInGetGiftClick:!0,doubleConfirmIndex:"",prizesIdList:[],haveGDprize:!1,signature:"",compliantOrderingFlag:0}},watch:{userToken:function(e,t){e!=t&&this.init()},floorInfo:function(e,t){e!=t&&this.init()}},computed:H(H({},(0,U.aH)("user",["userId","userToken","luckyCloverNum","onlyShowSubIdList"])),{},{channel:function(){return MiguplayUtils.url.getQueryString("appChannel")||MiguplayUtils.url.getQueryString("channel")||"zy-gw-mghy"},getPeriodStr:function(){switch(this.floorInfo.period){case 1:return"今日";case 2:return"本月";case 3:return"本周";default:return"本期"}},isPc:function(){return MiguplayUtils.ua.isPC()},getTypeName:function(e){return function(e){switch(e){case 1:return"云豆";case 2:return"抽奖碎片";case 3:return"元宝";default:return""}}}}),methods:H(H({},(0,U.PY)("user",["setLuckyCloverNum","setShowPayEquityPop","setOnlyShowSubIdList"])),{},{getLowpic:function(e){return G.A.getLowpic(e)},refreshTimeFunc:function(){this.getProgressInfo()},init:function(){this.getProgressInfo()},getProgressInfo:function(e,t){var i=this,o={headers:{userId:this.userId,userToken:this.userToken},data:{activityId:this.activityInfo.activityId,floorId:this.floorInfo.floorId,sign:localStorage.getItem("deliverySign-"+this.activityInfo.activityId)}};S.A.queryPregress(o).then((function(e){"000000"==e.data.returnCode&&(i.signature=e.data.resultData.signature,localStorage.setItem("deliverySignature-"+i.activityInfo.activityId+"-"+i.floorInfo.floorId,e.data.resultData.signature),i.floorList=e.data.resultData.floorList,i.canLoad=!0)})).catch((function(e){}))},getWidth:function(e,t,i){var o=this;if(this.canLoad){this.isLoading=!0;var r="";(3==e.conditionType&&0!==e.conditionPlayTime||5==e.conditionType&&0!==e.conditionGameTotalDays||6==e.conditionType&&0!==e.conditionGamePropPay||12==e.conditionType&&0!==e.conditionPlayTime||23==e.conditionType&&0!==e.conditionVideoTime||24==e.conditionType&&0!==e.conditionVideoTime||36==e.conditionType&&0!==e.conditionVideoTime||40==e.conditionType&&0!==e.conditionGamePropPay)&&(3==e.conditionType&&(r=e.userPlayTime/e.conditionPlayTime*100,e.conditionPlayTime<=e.userPlayTime&&(r="100")),5==e.conditionType&&(r=e.gameTotalDays/e.conditionGameTotalDays*100,e.conditionGameTotalDays<=e.gameTotalDays&&(r="100")),6==e.conditionType&&(r=e.gamePropsPay/e.conditionGamePropPay*100,e.conditionGamePropPay<=e.gamePropsPay&&(r="100")),12==e.conditionType&&(r=e.userPlayTime/e.conditionPlayTime*100,e.conditionPlayTime<=e.userPlayTime&&(r="100")),23!=e.conditionType&&24!=e.conditionType||(r=e.userVideoTime/e.conditionVideoTime*100,e.conditionVideoTime<=e.userVideoTime&&(r="100")),36==e.conditionType&&(r=e.userTaskValue/e.conditionVideoTime*100,e.conditionVideoTime<=e.userTaskValue&&(r="100")),40==e.conditionType&&(r=e.userTaskValue/e.conditionGamePropPay*100,e.conditionGamePropPay<=e.userTaskValue&&(r="100")),r=Math.floor(r),_()(".bubble"+t+i).css({width:"0"}),y()((function(){_()(".bubble"+t+i).animate({width:r+"%"},1e3)}),500),y()((function(){o.isLoading=!1}),1500))}},clickHandler:function(e,t){1!=this.activityInfo.status?(this.isLoading||(this.init(),this.$emit("refreshTime","process")),e.stopPropagation()):this.$parent.getToast()},timeGetClickDone:function(e){if(1!=this.activityInfo.status){try{N.A.recordEventAction({eventType:"clouddistribute_8",index:"102",labelName:this.floorList[e].name,topicName:this.floorList[e].progressFloorId,rese6:"3",rese8:"点击 云分发活动模板页面-进度条楼层",rese9:"进度条楼层"}),N.A.newrecordEventAction({eventContent:"1-1-2",activityId:this.activityInfo.activityId,type:2,opValue:0,action:"1-1-2进度条楼层（点击）",floorId:this.floorList.floorId,taskId:this.floorList[e].progressFloorId,conditionId:this.floorList[e].conditionId,rese1:3,rese3:this.floorList[e].conditionType&&6===this.floorList[e].conditionType?1:0})}catch(e){}this.userId&&this.userToken?this.floorList[e].progressPrizes.length>1?this.showDialog({type:2,title:"活动大礼包",info:"实际到账情况以“我的奖品”为准",dialogBgImg:this.activityInfo.receivePopUrl,giftState:!0,btnText:"确定"}):this.selectGiftInfo(e):G.A.toLogin()}else this.$parent.getToast()},selectGiftInfo:function(e){var t=this,i={headers:{userId:this.userId,userToken:this.userToken},data:{prizeId:this.floorList[e].progressPrizes[0].prizeId,activityFlag:this.activityInfo.activityFlag}};this.canLoad=!1,S.A.selectGift(i).then((function(i){if("000000"==i.data.returnCode)if(t.apiType="B",t.diaLogShowIndex=e,t.doneGift=i.data.resultData.prizeBaseInfo,4==t.doneGift.prizeType)t.showDialog({type:2,title:t.doneGift.prizeName,info:t.doneGift.electronicCode,prizeType:t.doneGift.prizeType,dialogBgImg:t.activityInfo.receivePopUrl,giftState:!0,btnText:"启动游戏兑换",gameId:t.doneGift.gameId,prizeReceivedUrl:t.floorList[e].prizeReceivedUrl});else if(5==t.doneGift.prizeType)t.showDialog({type:1,title:"谢谢惠顾"});else{t.subscribeFlag=[];for(var o=0;o<t.floorList[e].progressPrizes.length;o++)0!=t.floorList[e].progressPrizes[o].subscribeFlag?t.subscribeFlag[e]=1:t.subscribeFlag[e]=0;t.showDialog({type:2,title:t.doneGift.prizeName,info:1==t.subscribeFlag[e]?"实际到账情况以“我的奖品”为准":"",prizeType:t.doneGift.prizeType,dialogBgImg:t.activityInfo.receivePopUrl,giftState:!0,btnText:"确定",prizeReceivedUrl:t.floorList[e].prizeReceivedUrl,dlcEffectiveTime:t.doneGift.dlcEffectiveTime,dlcExpireTime:t.doneGift.dlcExpireTime})}else"120001"==i.data.returnCode||"120002"==i.data.returnCode||"120005"==i.data.returnCode?t.showDialog({type:1,title:"领取失败",info:i.data.message,btnText:"我知道了"}):t.showDialog({type:1,title:"领取失败",info:i.data.message})})).catch((function(e){t.showDialog({type:1,title:"网络异常",info:"网络请求出错，请检测网络"})}))},notStandNoJumpTypeHandle:function(e){this[e.functionName](e.functionParams[0],e.functionParams[1],!0);try{(0,J.c)({eventKey:"1-1-43-2",floorId:this.floorInfo.floorId,conditionId:this.floorList[e.functionParams[0]].conditionId||""})}catch(e){}},timeGetClick:function(e,t,i){var o=this;return(0,f.A)(I().mark((function r(){var n,s,a,l,c,d,f,u,p,g;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.$nextTick((function(){o.floorInfo.activityId=o.activityInfo.activityId,o.floorInfo.activityName=o.activityInfo.activityName})),1!=o.activityInfo.status){r.next=4;break}return o.$parent.getToast(),r.abrupt("return");case 4:try{N.A.recordEventAction({eventType:"clouddistribute_8",index:"102",labelName:o.floorList[e].name,topicName:o.floorList[e].progressFloorId,rese6:1==o.floorList[e].status?"1":"2",rese8:"点击 云分发活动模板页面-进度条楼层",rese9:"进度条楼层"}),N.A.newrecordEventAction({eventContent:"1-1-2",activityId:o.activityInfo.activityId,type:2,opValue:0,action:"1-1-2进度条楼层（点击）",floorId:o.floorList.floorId||"",taskId:o.floorList[e].progressFloorId||"",conditionId:o.floorList[e].conditionId||"",rese1:1==o.floorList[e].status?1:2==o.floorList[e].status?2:3,rese3:o.floorList[e].conditionType&&6===o.floorList[e].conditionType?1:0,rese5:o.floorInfo.pullFlag,rese6:o.activityInfo.pullFlag})}catch(e){}if(o.canLoad=!1,!o.userId||!o.userToken){r.next=55;break}if(!M.A.state.user.illegalUser){r.next=10;break}return G.A.blockIllegalUser(M.A.state.user.illegalUser),r.abrupt("return");case 10:if(1!=o.floorList[e].status){r.next=27;break}return r.next=13,o.checkUserCanGet();case 13:if(r.sent){r.next=15;break}return r.abrupt("return");case 15:n={};try{n.prePageName=document.title||"",n.rese44=t.progressFloorId||"",n.rese45="3",n.rese46="0",n.rese50="1_13_1",n.rese51=m()(s="任务_".concat(o.activityInfo.activityId,"_")).call(s,o.floorInfo.floorId)}catch(e){}if(n=MiguplayUtils.url.encodePayFromParam(n),0==o.floorList[e].notFinishJumpType||null==o.floorList[e].notFinishJumpType||1!=o.floorList[e].jumpType||i){r.next=24;break}return o.showDialog({type:34,title:o.floorList[e].notFinishDesc,gotoInfo:{functionName:"timeGetClick",functionParams:[e,t]}}),a="",1==o.floorList[e].notFinishJumpType&&(l=G.A.isMiguApp()?"notFinishLink":"notFinishOuterUrl",a=o.floorList[e][l]),(0,J.i)({eventKey:"1-1-43-1",floorId:o.floorInfo.floorId,url:a,conditionId:o.floorList[e].conditionId||""}),r.abrupt("return");case 24:0==o.floorList[e].notFinishJumpType||null==o.floorList[e].notFinishJumpType?o.showDialog({type:1,title:"暂未达标",info:o.floorList[e].notFinishDesc}):1==o.floorList[e].notFinishJumpType?y()((function(){var i,r;if(t.notFinishOuterUrl&&b()(i=t.notFinishOuterUrl).call(i,"onlyShowSubId")&&!G.A.isMiguApp()||t.notFinishLink&&b()(r=t.notFinishLink).call(r,"onlyShowSubId")&&G.A.isMiguApp()){var s,a=G.A.getQueryParam(G.A.isMiguApp()?t.notFinishLink:t.notFinishOuterUrl,"onlyShowSubId")||"",l=t.businessIdList&&t.businessIdList.length>0?L()(s=t.businessIdList).call(s,(function(e){return 0!==e&&"0"!==e})):null;return a?o.setOnlyShowSubIdList([a]):l?o.setOnlyShowSubIdList(l):o.setOnlyShowSubIdList([]),o.setShowPayEquityPop(!0),o.$parent.PayEquityPopupInfo=o.floorInfo,void window.localStorage.setItem("PayEquityPopupInfo",k()(o.floorInfo))}o.floorList[e].notFinishOuterUrl?G.A.isMiguApp()?G.A.openUrl(o.floorList[e].notFinishLink,null,null,o.floorInfo,o.activityInfo.activityId,n):G.A.openUrl(o.floorList[e].notFinishOuterUrl,null,null,o.floorInfo,o.activityInfo.activityId,n):G.A.openUrl(o.floorList[e].notFinishLink,null,null,o.floorInfo,o.activityInfo.activityId,n)}),200):2==o.floorList[e].notFinishJumpType?y()((function(){var i=o.floorList[e].notFinishGameId;i&&(!G.A.isMiguApp()&&1==o.activityInfo.pullFlag?o.showDialog({type:9,title:"温馨提示",btnText:"前往玩游戏",info:"玩游戏需前往咪咕快游,请确认是否前往？",gameId:i,downloadUrl:MiguplayUtils.ua.isAndroid()&&o.activityInfo.downloadUrl?o.activityInfo.downloadUrl:""}):2==t.conditionType||3==t.conditionType||7==t.conditionType||12==t.conditionType?G.A.playOrOpenApp("play",i,o.channel,o.activityInfo.downloadUrl,o.activityInfo.activityId,"1"):G.A.playOrOpenApp("play",i,o.channel,o.activityInfo.downloadUrl,o.activityInfo.activityId))}),200):3==o.floorList[e].notFinishJumpType&&G.A.openOtherApp({appDownloadUrl:t.appDownloadUrl,appType:o.floorList[e].conditionAppType}),r.next=53;break;case 27:return r.next=29,o.checkUserCanGet();case 29:if(r.sent){r.next=31;break}return r.abrupt("return");case 31:if(c=MiguplayUtils.url.getQueryString("goApp"),!(!G.A.isMiguApp()&&1==c&&1==o.floorInfo.pullFlag)){r.next=42;break}return r.next=36,G.A.pullDownload("",o.floorInfo.downloadUrl,o.activityInfo.activityId);case 36:d=r.sent,f=o.floorList[e].progressFloorId,u=t.progressPrizes[0]||{},o.showDialog({type:9,title:"温馨提示",btnText:"前往领取",info:"领取奖励需前往咪咕快游APP ，请确认是否领取？",taskId:f,floorInfo:o.floorInfo,prizeInfo:u,activityInfo:o.activityInfo,downloadUrl:d}),r.next=53;break;case 42:if(G.A.isMiguApp()&&MiguplayUtils.ua.isAndroid()||20!=c||MiguplayUtils.ua.isMiguaikan()||1!=o.floorInfo.pullFlag){r.next=46;break}o.showDialog({type:9,title:"温馨提示",btnText:"前往领取",info:"领取奖励需前往咪咕爱看，请确认是否领取？",floorNeedDetail:{floorId:o.floorInfo.floorId,labelName:o.floorList[e].name,topicName:o.floorList[e].progressFloorId,indexno:o.floorInfo.floorType,rese9:"进度条楼层"},isToAiKan:!0}),r.next=53;break;case 46:if(!o.floorList[e].progressPrizes.some((function(e){return 0==e.prizeLeftNum||null==e.prizeLeftNum}))){r.next=51;break}return o.showDialog({type:1,title:"温馨提示",info:"".concat(o.getPeriodStr,"奖品发完了哦"),btnText:"我知道了"}),r.abrupt("return");case 51:if(o.floorList[e].progressPrizes.some((function(e){return 1==e.nkProvince}))?o.haveGDprize=!0:o.haveGDprize=!1,o.floorList[e].progressPrizes.some((function(e){return 1==e.subscribeFlag||2==e.subscribeFlag}))){for(E.A.getReport(t.progressPrizes[0].prizeId||"-1",1),o.doubleConfirmInfo=L()(p=o.floorList[e].progressPrizes).call(p,(function(e){return 1==e.subscribeFlag||2==e.subscribeFlag})),o.floorList[e].progressPrizes.some((function(e){return 2==e.subscribeFlag}))&&(o.compliantOrderingFlag=1),o.showDialog({type:6,isShow:"false",title:"是否确认领取",info:o.doubleConfirmInfo,compliantOrderingFlag:o.compliantOrderingFlag}),o.doubleConfirmIndex=e,o.prizesIdList=[],g=0;g<o.floorList[e].progressPrizes.length;g++)o.prizesIdList.push(o.floorList[e].progressPrizes[g].prizeId);N.A.recordEventAction({eventType:"clouddistribute_16",index:"102",labelName:o.floorList[e].name,topicName:o.floorList[e].progressFloorId,rese8:"进入 云分发活动模板页面-进度条楼层-二次确认弹窗",rese9:"进度条楼层",rese10:o.prizesIdList.join("|")})}else o.clickGiftBag(e);case 53:r.next=56;break;case 55:G.A.toLogin();case 56:case"end":return r.stop()}}),r)})))()},getLotteryNumber:function(){var e=this;return(0,f.A)(I().mark((function t(){var i,o;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.userId||!e.userToken){t.next=16;break}return i={headers:{userId:e.userId,userToken:e.userToken},data:{activityFlag:e.activityInfo.activityFlag}},t.prev=2,t.next=5,S.A.getLotteryNumber(i);case 5:if("000000"!=(o=t.sent).data.returnCode){t.next=9;break}return e.setLuckyCloverNum(o.data.resultData),t.abrupt("return",o.data.resultData);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2);case 14:t.next=18;break;case 16:return e.setLuckyCloverNum(0),t.abrupt("return",0);case 18:case"end":return t.stop()}}),t,null,[[2,11]])})))()},clickGiftBag:function(e,t,i){var o=this;if(this.isInGetGiftClick){this.isInGetGiftClick=!1;var r=this.haveGDprize?1:t||0,n={headers:{userId:this.userId,userToken:this.userToken},data:{floorId:this.floorInfo.floorId,activityId:this.activityInfo.activityId,activityFlag:this.activityInfo.activityFlag,conditionId:this.floorList[e].conditionId,doubleConfirm:r,sign:this.activityInfo.sign,signature:this.signature,verifyCode:"true"!=String(i)?i:""}};this.$parent.showGdShortTest&&(n.data=H(H({},n.data),{},{subOrderId:this.$parent.subOrderId,smsSeq:this.$parent.smsSeq})),S.A.getGiftClick(n).then(function(){var t=(0,f.A)(I().mark((function t(r){var n,s,a,l,c,d,f,u,p;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.isInGetGiftClick=!0,!i||"true"==String(i)){t.next=5;break}if("000000"==r.data.returnCode){t.next=5;break}return o.$parent.handleSubmitOrderError(r.data.returnCode),t.abrupt("return",!1);case 5:if("000000"!=r.data.returnCode){t.next=18;break}for(o.$parent.showGdShortTest=!1,o.apiType="A",o.diaLogShowIndex=e,o.prizeInfo=r.data.resultData.prizeInfo,o.subscribeFlag=[],r.data.resultData.prizes.forEach((function(e){28!=e.prizeType&&37!=e.prizeType||(o.getLotteryNumber(),o.$parent.refreshTimeFunction())})),n=0;n<o.floorList[e].progressPrizes.length;n++)0!=o.floorList[e].progressPrizes[n].subscribeFlag?o.subscribeFlag[e]=1:o.subscribeFlag[e]=0;o.floorList[e].progressPrizes.length>1?o.showDialog({type:2,title:"活动大礼包",info:"实际到账情况以“我的奖品”为准",dialogBgImg:o.activityInfo.receivePopUrl,giftState:!1,btnText:"确定"}):4==o.prizeInfo.prizeType?(o.floorList[o.diaLogShowIndex].status=3,o.showDialog({type:2,title:o.prizeInfo.prizeName,info:o.prizeInfo.electronicCode,prizeType:o.prizeInfo.prizeType,dialogBgImg:o.activityInfo.receivePopUrl,giftState:!1,btnText:"启动游戏兑换",gameId:o.prizeInfo.gameId,prizeReceivedUrl:o.floorList[e].prizeReceivedUrl})):5==o.prizeInfo.prizeType?o.showDialog({type:1,title:"谢谢惠顾"}):3==o.prizeInfo.prizeType?o.showDialog({type:2,title:o.prizeInfo.prizeName,prizeType:o.prizeInfo.prizeType,dialogBgImg:o.activityInfo.receivePopUrl,giftState:!1,btnText:"寄送地址填写",addressDeadLineDate:o.prizeInfo.addressDeadLineDate,rewardId:o.prizeInfo.recordId,prizeInfo:o.dialogData}):(s=i&&"true"!=String(i),o.showDialog({type:2,title:o.prizeInfo.prizeName,info:1==o.subscribeFlag[e]||s?"实际到账情况以“我的奖品”为准":"",prizeType:o.prizeInfo.prizeType,dialogBgImg:o.activityInfo.receivePopUrl,giftState:!1,btnText:"确定",prizeReceivedUrl:o.floorList[e].prizeReceivedUrl,dlcEffectiveTime:o.prizeInfo.dlcEffectiveTime,dlcExpireTime:o.prizeInfo.dlcExpireTime})),o.floorList[o.diaLogShowIndex].status=3,t.next=48;break;case 18:if("120003"!=r.data.returnCode){t.next=22;break}r.data.resultData&&3==o.floorList[e].memberJump?o.showDialog({type:5,title:"领取失败",info:r.data.message,errorJumpType:o.floorList[e].memberJump,memberDialogInfo:{floorType:"progress",floorId:o.floorInfo.floorId,conditionId:o.floorList[e].conditionId}}):(a="",o.floorList[e].urlFloorId&&""!=o.floorList[e].urlFloorId&&(a=w()(l=o.floorList[e].urlFloorId.split("-")).call(l,1)[0]),o.showDialog({type:1,title:"领取失败",info:r.data.message,btnText:"立即前往",errorJumpType:o.floorList[e].memberJump,errorJumpUrl:o.floorList[e].addressLink,urlFloor:2==o.floorList[e].memberJump?a:""})),t.next=48;break;case 22:if("080801"!=r.data.returnCode){t.next=26;break}o.showDialog({type:5,title:"领取失败",info:r.data.message}),t.next=48;break;case 26:if("120001"!=r.data.returnCode&&"120002"!=r.data.returnCode&&"120005"!=r.data.returnCode){t.next=30;break}o.showDialog({type:1,title:"领取失败",info:r.data.message,btnText:"我知道了"}),t.next=48;break;case 30:if("120010"!=r.data.returnCode){t.next=35;break}o.showDialog({type:1,title:"温馨提示",info:r.data.message,btnText:"我知道了"}),(0,R.f)({eventKey:"1-1-19-2",activityId:o.activityInfo.activityId,rese2:o.prizeInfo.prizeId,rese3:2}),t.next=48;break;case 35:if("120007"!=r.data.returnCode){t.next=39;break}o.showDialog({type:1,title:"领取失败",info:"抱歉您不是目标用户，仅目标用户才可以参与哦"}),t.next=48;break;case 39:if("120008"!=r.data.returnCode){t.next=47;break}return d=F()(c=o.floorList[e].progressPrizes).call(c,(function(e){return 1==e.nkProvince})),t.next=43,o.$parent.getNkPreCreateOrder(d.prizeId,o.activityInfo.activityFlag);case 43:(f=t.sent)&&(o.$parent.showGdShortTest=!0,o.$parent.gDShortTestInfo={floorId:o.floorInfo.floorId,prizeId:d.prizeId,prizeName:"是否领取".concat(d.prizeName),activityInfo:o.activityInfo,floorInfo:o.floorInfo,subOrderId:f},o.doubleConfirmIndex=e,E.A.getReport(d.prizeId||"-1",1)),t.next=48;break;case 47:"120015"==r.data.returnCode?(o.showDialog({type:33,info:(null===(u=o.floorInfo)||void 0===u?void 0:u.notReceiveDesc)||r.data.message}),(0,R.f)({eventKey:"1-1-19-2",activityId:o.activityInfo.activityId,rese2:null===(p=o.prizeInfo)||void 0===p?void 0:p.prizeId,rese3:7})):o.showDialog({type:1,title:"领取失败",info:r.data.message});case 48:o.getProgressInfo();case 49:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){o.isInGetGiftClick=!0,o.showDialog({type:1,title:"网络异常",info:"网络请求出错，请检测网络"})}))}},doubleConfirm:function(e){this.clickGiftBag(this.doubleConfirmIndex,1,e),N.A.recordEventAction({eventType:"clouddistribute_17",index:"102",labelName:this.floorList[this.doubleConfirmIndex].name,topicName:this.floorList[this.doubleConfirmIndex].progressFloorId,rese8:"点击 云分发活动模板页面-进度条楼层-二次确认弹窗-确认",rese9:"进度条楼层",rese10:this.prizesIdList.join("|")})},sureDiglog:function(){this.$refs.dialog.closeDialog()},closeDiglog:function(){"A"==this.apiType&&(this.floorList[this.diaLogShowIndex].status=3)},jinfenExposure:function(){var e,t=this,i=document.documentElement.clientHeight||window.screen.height;this.floorList&&A()(e=this.floorList).call(e,(function(e,o){var r=parseInt(_()("#progress"+e.progressFloorId).offset().top-_()(document).scrollTop()),n=parseInt(_()("#progress"+e.progressFloorId).height());r+n/3*2<i&&-1*r<n/3*2&&(N.A.recordEventAction({eventType:"clouddistribute_7",index:"102",labelName:e.name,topicName:e.progressFloorId,rese6:1==e.status?"1":2==e.status?"2":"3",rese8:"曝光 云分发活动模板页面-进度条楼层",rese9:"进度条楼层"}),N.A.newrecordEventAction({eventContent:"1-1-2",activityId:t.activityInfo.activityId,type:1,opValue:0,action:"1-1-2 进度条楼层（曝光）",floorId:t.floorInfo.floorId,taskId:e.progressFloorId,conditionId:e.conditionId,rese1:1==e.status?1:2==e.status?2:3,rese3:e.conditionType&&6===e.conditionType?1:0,rese5:t.floorInfo.pullFlag,rese6:t.activityInfo.pullFlag}))}))}}),created:function(){this.init(),this.floorInfo.description&&(this.description=this.floorInfo.description.split("\r\n"),""==this.description[this.description.length-1]&&this.description.pop())},mounted:function(){},directives:{checkHeight:{checkHeightAndInsertStyle:function(e,t,i){y()((function(){e.getElementsByTagName("img")[0].offsetHeight>=90?e.classList.add("newshortStyle"):e.classList.remove("newshortStyle")}),500)},bind:function(e,t,i){t.def.checkHeightAndInsertStyle(e,t,i)},inserted:function(e,t,i){t.def.checkHeightAndInsertStyle(e,t,i)},update:function(e,t,i){t.def.checkHeightAndInsertStyle(e,t,i)},unbind:function(e,t){}}}},j=B,q=(0,i(14486).A)(j,(function(){var e=this,t=e._self._c;return t("div",{ref:"floor".concat(e.floorInfo.floorId),staticClass:"stepWrap",attrs:{id:"progress"+e.floorInfo.floorId}},[e.floorInfo.floorPicture?t("p",{staticClass:"stepHead"},[t("img",{attrs:{src:e.getwebp(e.floorInfo.floorPicture)}})]):e._e(),e._v(" "),t("div",{staticClass:"timeWrap"},[e._l(e.floorList,(function(i,o){return t("div",{directives:[{name:"checkHeight",rawName:"v-checkHeight"}],key:o,staticClass:"timeDiv",attrs:{id:"progress"+i.progressFloorId}},[1==i.status&&1!=i.notGiftPrize?t("div",{on:{click:function(t){return t.stopPropagation(),e.timeGetClick(o,i)}}},[t("img",{class:"timeProgress"+i.progressFloorId,attrs:{src:e.getwebp(i.notFinishUrl)}})]):e._e(),e._v(" "),2==i.status&&1!=i.notGiftPrize?t("div",{on:{click:function(t){return t.stopPropagation(),e.timeGetClick(o,i)}}},[t("img",{class:"timeProgress"+i.progressFloorId,attrs:{src:i.notReceiveUrl}})]):e._e(),e._v(" "),3==i.status&&1!=i.notGiftPrize?t("div",{on:{click:function(t){return t.stopPropagation(),e.timeGetClickDone(o)}}},[t("img",{class:"timeProgress"+i.progressFloorId,attrs:{src:e.getwebp(i.receivedUrl)}})]):e._e(),e._v(" "),1==i.notGiftPrize?t("div",[t("img",{class:"timeProgress"+i.progressFloorId,attrs:{src:e.getwebp(i.notReceiveUrl)}})]):e._e(),e._v(" "),1==i.progressPrizes.length&&1==i.showPrizeNum?t("div",{staticClass:"prize-num",style:{color:e.activityInfo.color||"#676565"}},[e._v("\n        库存："+e._s(i.progressPrizes[0].prizeLeftNum)+"\n      ")]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:3!==i.status,expression:"item.status !== 3"}],staticClass:"fresh",on:{click:function(t){return t.stopPropagation(),e.clickHandler(t,o)}}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:3!==i.status,expression:"item.status !== 3"}],staticClass:"progress-wrap",class:e.isPc?"pc":""},[t("div",{directives:[{name:"show",rawName:"v-show",value:1==i.status||2==i.status,expression:"item.status == 1 || item.status == 2"}],class:["bubble","bubble"+o+e.nextIndex],style:{width:e.getWidth(i,o,e.nextIndex)+"%","background-color":e.activityInfo.color||"#3CD99C"}})]),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:3!==i.status,expression:"item.status !== 3"}],staticClass:"stepDes",class:e.isPc?"pc":""},[5==i.conditionType?[t("span",[e._v("游戏累计天数 : ")]),e._v(" "),t("span",{staticClass:"minStyle"},[e._v(e._s(i.gameTotalDays)+"天/"+e._s(i.conditionGameTotalDays)+"天")])]:6==i.conditionType?[t("span",[e._v("游戏消费 : ")]),e._v(" "),t("span",{staticClass:"minStyle"},[e._v(e._s(i.gamePropsPay)+"元/"+e._s(i.conditionGamePropPay)+"元")])]:23==i.conditionType||24==i.conditionType?[t("span",[e._v("观看时长 : ")]),e._v(" "),t("span",{staticClass:"minStyle"},[e._v(e._s(i.userVideoTime||0)+"秒/"+e._s(i.conditionVideoTime)+"秒")])]:36==i.conditionType?[t("span",[e._v("观看时长 : ")]),e._v(" "),t("span",{staticClass:"minStyle"},[e._v(e._s(i.userTaskValue||0)+"秒/"+e._s(i.conditionVideoTime)+"秒")])]:40==i.conditionType?[t("span",[e._v("消耗"+e._s(e.getTypeName(i.deductType))+" : ")]),e._v(" "),t("span",{staticClass:"minStyle"},[e._v(e._s(i.consumedCurrencyNums||0)+"/"+e._s(i.conditionGamePropPay)+"个")])]:[t("span",[e._v("游戏时长 : ")]),e._v(" "),t("span",{staticClass:"minStyle"},[e._v(e._s(i.userPlayTime)+"分钟/"+e._s(i.conditionPlayTime)+"分钟")])]],2)])})),e._v(" "),e.floorInfo.description?t("div",{staticClass:"buttom-text"},[t("div",{staticClass:"bottomInfo"},[e._v("\n        "+e._s(e.floorInfo.description)+"\n      ")])]):e._e(),e._v(" "),t("dia-log",{ref:"dialog",attrs:{dialogInfo:e.dialogInfo,activityInfo:e.activityInfo},on:{sure:e.sureDiglog,close:e.closeDiglog,doubleConfirm:e.doubleConfirm}})],2)])}),[],!1,null,"3fa65cc2",null).exports}}]);
